!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="e4388d60-e365-4de7-96e5-4cde10b38ffc",e._sentryDebugIdIdentifier="sentry-dbid-e4388d60-e365-4de7-96e5-4cde10b38ffc")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[24823],{5129:(e,t,n)=>{"use strict";n.d(t,{MQ:()=>f,YM:()=>g,Tm:()=>d});var r=n(51471);let o="https://challenges.cloudflare.com/turnstile/v0/api.js?onload=onloadTurnstileCallback";function i(e,t){let n=document.getElementById(e);n&&n.remove(),t&&window.turnstile&&window.turnstile.remove(t)}async function s(){await (window.turnstile||document.querySelector('script[src="'.concat(o,'"]'))?Promise.resolve():new Promise((e,t)=>{let n=document.createElement("script");n.src=o,n.async=!0,n.defer=!0,n.onerror=()=>t(Error("Failed to load Turnstile script")),document.head.appendChild(n),window.onloadTurnstileCallback=()=>{e(),delete window.onloadTurnstileCallback}}));let e="turnstile-widget",t="turnstile_widget";i(e);let n=document.createElement("div");if(n.id=e,Object.assign(n.style,{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:"10000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),n.innerHTML='\n    <div>\n      <p style="color: white; text-align: center; margin: 0 0 10px 0;">\n        Making sure you\'re human...\n      </p>\n      <div id="'.concat(t,'" style="display: flex; justify-content: center; align-items: center;"></div>\n    </div>\n  '),!document.body)throw Error("Document body not found");return document.body.appendChild(n),new Promise((n,r)=>{var o;let s=null==(o=window.turnstile)?void 0:o.render("#".concat(t),{sitekey:"0x4AAAAAABSXp6OOe7EVGPnR",callback:t=>{i(e,s),n(t)},"error-callback":()=>{i(e,s),r(Error("Turnstile challenge failed"))},"expired-callback":()=>{i(e,s),r(Error("Turnstile token expired"))},"timeout-callback":()=>{i(e,s),r(Error("Turnstile challenge timed out"))}});s||(i(e),r(Error("Failed to render Turnstile widget")))})}async function a(e){try{let t=await fetch("/api/verify-turnstile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})}),n=await t.json();return!0===n.success}catch(e){return!1}}var l=n(17703);let c=["/rest/app-chat/conversations/new","/rest/app-chat/conversations/soft/{conversationId}","/rest/app-chat/conversations/{conversationId}/model-responses","/rest/app-chat/conversations/{conversationId}/responses","/rest/app-chat/conversations/{conversationId}/share","/rest/app-chat/conversations/{conversationId}/title","/rest/app-chat/conversations/{conversationId}/user-responses","/rest/app-chat/file-metadata/{fileMetadataId}","/rest/app-chat/image-generations","/rest/app-chat/share_links/{shareLinkId}","/rest/app-chat/share_links/{shareLinkId}/clone","/rest/app-chat/upload-file","/rest/app-chat/conversations","/rest/app-chat/conversations/{conversationId}"];function u(e,t){let n;try{n=new URL(t).pathname}catch(e){n=t}let r=(function(e){for(e.startsWith("/")||(e="/"+e);e.endsWith("/");)e=e.substring(0,e.length-1);return e})(n).slice(15);for(let t of c){let n=t.slice(15);if(function(e,t){let n=e.split("/"),r=t.split("/");if(n.length!==r.length)return!1;for(let e=0;e<n.length;e++){let t=n[e],o=r[e];if(o.startsWith("{")&&o.endsWith("}")){if(""===t)return!1}else if(t!==o)return!1}return!0}(r,n))return"".concat(e.toUpperCase()," ").concat(n.toLowerCase())}}function d(e){e&&(e.user?(0,r.gV)({id:e.user.userId,email:e.user.email}):e.anonUser&&(0,r.gV)({id:e.anonUser.anonUserId,isAnon:!0}))}function f(e,t){let n=(null==t?void 0:t.method)||"GET",o="string"==typeof e?e:e instanceof URL?e.href:e.url,i=u(n,o);(0,l.N8)("fetchAndRecord4xx5xx",{type:"client_fetch_start",endpoint:null!=i?i:"unknown"});let c=Date.now();return fetch(e,t).then(async n=>403===n.status&&"challenge"===n.headers.get("cf-mitigated")?s().then(a).then(e=>{if(!e)throw Error("Failed to validate turnstile token")}).catch(e=>{throw e.errorSource="cloudflare",e}).then(()=>(c=Date.now(),fetch(e,t))):n).then(async e=>{if(e.status>=400){var s;let a=await e.clone().text().then(e=>{try{return JSON.parse(e)}catch(t){return e}}),c=Error(JSON.stringify((null==(s=a.error)?void 0:s.message)||a.error||a));c.name="HttpError ".concat(e.status),Error.captureStackTrace(c,f),(0,r.Cp)(c,{tags:{endpoint:i,source:"api",loc:"fetchAndRecord4xx5xx"},extra:{status:e.status,statusText:e.statusText,url:o,method:n,reqBody:null==t?void 0:t.body,body:a}}),(0,l.N8)("fetchAndRecord4xx5xx",{type:"client_fetch_error",endpoint:null!=i?i:"unknown",errorCode:e.status.toString(),source:"api"})}else(0,l.N8)("fetchAndRecord4xx5xx",{type:"client_fetch_success",endpoint:null!=i?i:"unknown",latencyMs:Date.now()-c});return e}).catch(e=>{var s;throw"cloudflare"!==e.errorSource&&(0,r.Cp)(e,{tags:{endpoint:i,source:"api",loc:"fetchAndRecord4xx5xx"},extra:{url:o,method:n,reqBody:null==t?void 0:t.body}}),(0,l.N8)("fetchAndRecord4xx5xx",{type:"client_fetch_error",endpoint:null!=i?i:"unknown",errorCode:"unknown",source:null!=(s=e.errorSource)?s:"api"}),e})}function g(e,t){if(e&&e.error){var n;let o=null!=(n=null==t?void 0:t.url)?n:"unknown",i=u("POST",o),s=Error(e.error.message||e.error);s.name="StreamError",Error.captureStackTrace(s,g),(0,r.Cp)(s,{tags:{endpoint:i,loc:"recordStreamError"},extra:{...e.error,url:o}})}return e}},8059:(e,t,n)=>{"use strict";let r;n.r(t),n.d(t,{StatsigProvider:()=>u,getCurrentPositionPromise:()=>d,getStatsigUser:()=>c,statsigClient:()=>r});var o=n(79342),i=n(17703),s=n(20337),a=n(41722),l=n(88382);function c(e,t){return e?{userID:null==e?void 0:e.userId,customIDs:{xUserId:null==e?void 0:e.xUserId},email:null==e?void 0:e.email,custom:{familyName:null==e?void 0:e.familyName,givenName:null==e?void 0:e.givenName,xSubscriptionType:null==e?void 0:e.xSubscriptionType}}:t?{userID:null==t?void 0:t.anonUserId}:{}}function u(e){let{env:t,clientKey:n,user:u,anonUser:d,children:f}=e,{client:g,isLoading:p}=(0,s.useClientAsyncInit)(n,c(u,d),{networkConfig:{logEventUrl:"/api/statsig/log_event"},logLevel:"production"===t?s.LogLevel.Error:s.LogLevel.Debug});return((0,l.useEffect)(()=>{(0,a.gX)(g),r=g},[g]),function(e){let t=e.loadingStatus,[n]=(0,l.useState)(()=>Date.now());(0,l.useEffect)(()=>{"Ready"===t&&(0,i.N8)("statsigProvider",{type:"statsig_init_time",valueMs:Date.now()-n})},[t,n])}(g),p)?null:(0,o.jsx)(s.StatsigProvider,{client:g,children:f})}function d(){return new Promise((e,t)=>{if(!navigator.geolocation)return void t(Error("No navigator geolocation"));navigator.geolocation.getCurrentPosition(e,t)})}},17703:(e,t,n)=>{"use strict";n.d(t,{HX:()=>c,N8:()=>g,Pp:()=>p,hl:()=>v,vV:()=>l,wl:()=>h});var r=n(78436),o=n(8059),i=n(51471),s=n(38541),a=n.n(s);function l(e,t,n){var s,a,l;{i.Cp(t,{tags:{loc:e},extra:n}),null===o.statsigClient||void 0===o.statsigClient||o.statsigClient.logEvent("error",String(t),{location:e,...n});let r=["ResponseError","DetailedResponseError"].includes(null!=(l=t.name)?l:"unknown"),s="logMetric"===e;r||s||g(e,{type:"client_application_error",location:e})}null!==r.sessionStoreState&&void 0!==r.sessionStoreState&&null!=(a=r.sessionStoreState.getState().user)&&null!=(s=a.email)&&s.endsWith("@x.ai")&&console.error("DEV LOGGER:",e,t)}function c(e){return t=>{l(e,t)}}let u=[];function d(){0!==u.length&&(function(e,t){let n=JSON.stringify(t);if("sendBeacon"in navigator){let t=new Blob([n],{type:"application/json"});if(navigator.sendBeacon(e,t))return}fetch(e,{method:"POST",body:n,headers:{"Content-Type":"application/json"},keepalive:!0}).catch(e=>{l("reportMetrics",e)})}("/api/log_metric",u),u=[])}let f=a().debounce(d,2e3);function g(e,t){u.push(t),f()}function p(e,t){let n=Date.now();function r(){t.millisecondsPerTokenList.length>0&&(g(e,{...t}),t.millisecondsPerTokenList=[])}let o=setInterval(()=>{r()},5e3);return{log:()=>{let e=Date.now();t.millisecondsPerTokenList.push(e-n),n=e},resetTime:()=>{n=Date.now()},stop:()=>{clearInterval(o),r()}}}function h(e,t,n){let r=Date.now(),o=!1;return()=>{o||(t.timeToFirstTokenMs=Date.now()-r,n(t.timeToFirstTokenMs),g(e,{...t}),o=!0)}}function v(e,t,n){let r=Date.now(),o=!1;return()=>{o||(t.timeToFirstChunkMs=Date.now()-r,n(t.timeToFirstChunkMs),g(e,{...t}),o=!0)}}window.document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&d()})},29071:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(86750),o=n(79185);let i=(e,t)=>(e.queryFn&&"function"==typeof e.queryFn&&(e.queryFn=(0,o.Y)(e.queryFn)),(0,r.useInfiniteQuery)(e,t))},31643:(e,t,n)=>{"use strict";n.d(t,{S3:()=>h,hc:()=>v,f:()=>r.HydrationBoundary,E1:()=>o.E,Ht:()=>i.QueryClientProvider,CZ:()=>p,Y6:()=>d.Y,u1:()=>f,S$:()=>s.S$,xI:()=>g.xI,qu:()=>l.default,n_:()=>c.default,zv:()=>a.useMutationState,IT:()=>u.default,jE:()=>i.useQueryClient});var r=n(4963),o=n(68736),i=n(20659),s=n(4965),a=n(7146),l=n(29071),c=n(78433),u=n(35030),d=n(79185);n(84252),n(40534),n(67614),n(79342),n(88382);let f=e=>{if(!e)return{message:"Something unexpected went wrong."};try{if("object"==typeof e&&"message"in e&&"string"==typeof e.message){let t,n=e.message,r=e.message.indexOf(" [WKE=");-1!==r&&(n=e.message.substring(0,r));let o="Error: ",i=n.indexOf(o);-1!==i&&(n=n.substring(o.length)),"traceId"in e&&"string"==typeof e.traceId&&(t=e.traceId);let s=n.match(/^\d+\s[A-Z_]+:\s([\s\S]+)/);if(s&&s.length>=1){let e={};if(s[1].split("\n").forEach(t=>{let n=t.split(":").map(e=>e.trim());if(2===n.length){let t=n[0],r=n[1];e[t]||(e[t]=[]),e[t].push(r)}}),Object.keys(e).length>0)return{message:"Please fix the errors before continuing.",details:e,traceId:t};return{message:s[1],traceId:t}}}}catch(e){}return"string"==typeof e?{message:e}:{message:"Something went wrong."}};n(77973);var g=n(56063);n(42067);let p="stream:did-not-close",h="grok:content-moderated",v="file:storage-exhausted"},35030:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(8150),o=n(79185);let i=(e,t)=>(e.queryFn&&"function"==typeof e.queryFn&&(e.queryFn=(0,o.Y)(e.queryFn)),(0,r.useQuery)(e,t))},40534:(e,t,n)=>{"use strict";n.d(t,{M0:()=>r,bi:()=>o});let r=n(37811).env.NEXT_PUBLIC_AXIOM_ENVIRONMENT||"production",o="production"==r||"development"==r},42067:(e,t,n)=>{"use strict";n.d(t,{l:()=>r});class r extends Error{constructor({status:e,wellKnownErrors:t,message:n,traceId:r,name:o}){super(n),this.name=null!=o?o:"QueryError",this.status=e,this.wellKnownErrors=t,this.traceId=r}}},44507:()=>{},55473:(e,t,n)=>{"use strict";n.d(t,{X$:()=>f,Jt:()=>d,L5:()=>g,nT:()=>p});var r=n(99566);let o=(0,r.createServerReference)("7f2224479a5363b388565ead6a745814df58b9eee5",r.callServer,void 0,r.findSourceMapURL,"createAnonUser"),i=(0,r.createServerReference)("7f12abab6ca1981abcd476d5ef20edfaf500238e2a",r.callServer,void 0,r.findSourceMapURL,"createChallenge"),s=(0,r.createServerReference)("7fd1771305325123ecbf2b9fca26cd136c0ac7268b",r.callServer,void 0,r.findSourceMapURL,"setAnonCookies");var a=n(31643),l=n(34425),c=n.n(l),u=n(86530).hp;let d="anonUserId",f="anonPrivateKey";async function g(){let e,t=e=>{let t=new Uint8Array(e);return crypto.getRandomValues(t),t};do e=t(32);while(!c().privateKeyVerify(e));let n=c().publicKeyCreate(e),r=function(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return window.btoa(t)}(e),i=await (0,a.Y6)(o)({userPublicKey:n});if(!i)throw Error("Failed to create anon user");return{privateKey:r,anonUserId:i.anonUserId}}async function p(e){let{privateKey:t,anonUserId:n}=e,r=await (0,a.Y6)(i)({anonUserId:n});if(!r)throw Error("Failed to create challenge");let{challenge:o,challengeExpirationTime:l}=r,d=new Uint8Array(o),f=await crypto.subtle.digest("SHA-256",d),g=new Uint8Array(u.from(t,"base64")),{signature:p}=c().ecdsaSign(new Uint8Array(f),g),h=u.from(d).toString("base64"),v=u.from(p).toString("base64");return await s({anonUserId:n,challenge:h,signature:v}),{challenge:h,signature:v,challengeExpirationDate:l?function(e){if(!e)return new Date;let t=new Date(0);return"string"==typeof e.seconds?t.setUTCSeconds(parseInt(e.seconds,10)):"number"==typeof e.seconds&&t.setUTCSeconds(e.seconds),t}(l):new Date(0)}}},56063:(e,t,n)=>{"use strict";function r(e){let t=/\[WKE=([a-zA-Z0-9\-_]+):([a-zA-Z0-9\-_]+)(:([a-zA-Z0-9\-_]+))?]/g,n=[],r=null;do null!==(r=t.exec(e))&&n.push({error:"".concat(r[1],":").concat(r[2]),field:r[4]});while(null!==r);return n}function o(e){return e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message?r(e.message):"string"==typeof e?r(e):[]}n.d(t,{u$:()=>o,xI:()=>r})},57175:()=>{},67614:(e,t,n)=>{"use strict";n.d(t,{default:()=>s});var r=n(84252),o=n(88382),i=n(40534);let s=e=>{let t=(0,r.useLogger)(e),n=(0,o.useMemo)(()=>({environment:i.M0,url:window.location.href,isServerSide:!1}),[]);return i.bi?{flush:t.flush,debug:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.debug(e,{...n,...r})},info:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.info(e,{...n,...r})},warn:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.warn(e,{...n,...r})},error:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.error(e,{...n,...r})},logHttpRequest:(e,r,o,i)=>t.logHttpRequest(e,r,o,{...n,...i||{}})}:{debug:console.debug,info:console.info,warn:console.warn,error:console.error,flush:()=>{},logHttpRequest:console.info}}},77973:(e,t,n)=>{"use strict";n.d(t,{r:()=>o});var r=function(e){return e.Ok="0 OK",e.Cancelled="1 CANCELLED",e.Unknown="2 UNKNOWN",e.InvalidArgument="3 INVALID_ARGUMENT",e.DeadlineExceeded="4 DEADLINE_EXCEEDED",e.NotFound="5 NOT_FOUND",e.AlreadyExists="6 ALREADY_EXISTS",e.PermissionDenied="7 PERMISSION_DENIED",e.ResourceExhausted="8 RESOURCE_EXHAUSTED",e.FailedPrecondition="9 FAILED_PRECONDITION",e.Aborted="10 ABORTED",e.OutOfRange="11 OUT_OF_RANGE",e.Unimplemented="12 UNIMPLEMENTED",e.Internal="13 INTERNAL",e.Unavailable="14 UNAVAILABLE",e.DataLoss="15 DATA_LOSS",e.Unauthenticated="16 UNAUTHENTICATED",e}({});let o=e=>{if(e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message){for(let t in r)if(isNaN(Number(t))){let n=r[t];if(e.message.includes(n))return n}}}},78433:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(60919),o=n(79185);let i=(e,t)=>(e.mutationFn&&(e.mutationFn=(0,o.Y)(e.mutationFn)),(0,r.useMutation)(e,t))},78436:(e,t,n)=>{"use strict";let r;n.r(t),n.d(t,{SessionStoreContext:()=>g,SessionStoreProvider:()=>p,createSessionStore:()=>h,sessionStoreState:()=>r,useSession:()=>v});var o=n(79342),i=n(55473),s=n(5129),a=n(51471),l=n(88382),c=n(21874),u=n(4890),d=n(99566);let f=(0,d.createServerReference)("7f09f04bff3d14ae716701385ac135ce56878c6780",d.callServer,void 0,d.findSourceMapURL,"getInitialSessionData"),g=(0,l.createContext)(void 0),p=e=>{let{initialData:t,children:n}=e;(0,l.useEffect)(()=>(0,s.Tm)(t),[t]);let i=(0,l.useRef)(void 0);return i.current||(i.current=h(t),r=i.current),(0,o.jsx)(g.Provider,{value:i.current,children:n})},h=e=>(0,c.y)()(t=>({user:null==e?void 0:e.user,countryCode:null==e?void 0:e.countryCode,subscriptions:null==e?void 0:e.subscriptions,updateUser:e=>{t(t=>({...t||{},user:{...t.user||{},...e}})),a.gV({id:e.userId,email:e.email})},clearUser:()=>t(e=>({...e||{},user:void 0})),refreshSession:async()=>f().then(e=>{t(e)}),anonUser:null==e?void 0:e.anonUser,refreshAnonUser:async(e,n)=>(0,i.nT)({privateKey:n,anonUserId:e}).then(n=>{t(t=>({...t||{},anonUser:{anonUserId:e,expirationDate:n.challengeExpirationDate}})),a.gV({id:e,isAnon:!0})})})),v=()=>{let e=(0,l.useContext)(g);if(!e)throw Error("useSession must be used within SessionStoreProvider");return(0,u.P)(e)}},79185:(e,t,n)=>{"use strict";n.d(t,{Y:()=>s});var r=n(77973),o=n(56063),i=n(42067);function s(e){return async t=>{let n=await e(t);if(n&&"object"==typeof n&&"error"in n){let{error:e,traceId:t}=n;throw new i.l({status:(0,r.r)(e),wellKnownErrors:(0,o.u$)(e),message:e,traceId:t})}return n}}}}]);